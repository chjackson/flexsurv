<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Cumulative transition-specific intensity/hazard functions for
fully-parametric multi-state or competing risks models, using a
piecewise-constant approximation that will allow prediction using the
functions in the mstate package."><title>Cumulative intensity function for parametric multi-state models — msfit.flexsurvreg • flexsurv</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cumulative intensity function for parametric multi-state models — msfit.flexsurvreg"><meta property="og:description" content="Cumulative transition-specific intensity/hazard functions for
fully-parametric multi-state or competing risks models, using a
piecewise-constant approximation that will allow prediction using the
functions in the mstate package."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">flexsurv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/pdf.html">flexsurv PDF vignettes</a>
    <a class="dropdown-item" href="../articles/standsurv.html">Calculating standardized survival measures in flexsurv</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/chjackson/flexsurv/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Cumulative intensity function for parametric multi-state models</h1>
      <small class="dont-index">Source: <a href="https://github.com/chjackson/flexsurv/blob/HEAD/R/mstate.R" class="external-link"><code>R/mstate.R</code></a></small>
      <div class="d-none name"><code>msfit.flexsurvreg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Cumulative transition-specific intensity/hazard functions for
fully-parametric multi-state or competing risks models, using a
piecewise-constant approximation that will allow prediction using the
functions in the <span class="pkg">mstate</span> package.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">msfit.flexsurvreg</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">t</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  variance <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  tvar <span class="op">=</span> <span class="st">"trans"</span>,</span>
<span>  <span class="va">trans</span>,</span>
<span>  B <span class="op">=</span> <span class="fl">1000</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>Output from <code><a href="flexsurvreg.html">flexsurvreg</a></code> or
<code><a href="flexsurvspline.html">flexsurvspline</a></code>, representing a fitted survival model object.</p>
<p>The model should have been fitted to data consisting of one row for each
observed transition and additional rows corresponding to censored times to
competing transitions.  This is the "long" format, or counting process
format, as explained in the <span class="pkg">flexsurv</span> vignette.</p>
<p>The model should contain a categorical covariate indicating the transition.
In <code>flexsurv</code> this variable can have any name, indicated here by the
<code>tvar</code> argument.  In the Cox models demonstrated by <span class="pkg">mstate</span> it is
usually included in model formulae as <code>strata(trans)</code>, but note that
the <code>strata</code> function does not do anything in <span class="pkg">flexsurv</span>.  The
formula supplied to <code><a href="flexsurvreg.html">flexsurvreg</a></code> should be precise about which
parameters are assumed to vary with the transition type.</p>
<p>Alternatively, if the parameters (including covariate effects) are assumed
to be different between different transitions, then a list of
transition-specific models can be formed.  This list has one component for
each permitted transition in the multi-state model.  This is more
computationally efficient, particularly for larger models and datasets.
See the example below, and the vignette.</p></dd>


<dt>t</dt>
<dd><p>Vector of times.  These do not need to be the same as the observed
event times, and since the model is parametric, they can be outside the
range of the data.  A grid of more frequent times will provide a better
approximation to the cumulative hazard trajectory for prediction with
<code><a href="https://rdrr.io/pkg/mstate/man/probtrans.html" class="external-link">probtrans</a></code> or <code><a href="https://rdrr.io/pkg/mstate/man/mssample.html" class="external-link">mssample</a></code>, at the
cost of greater computational expense.</p></dd>


<dt>newdata</dt>
<dd><p>A data frame specifying the values of covariates in the
fitted model, other than the transition number.  This must be specified if
there are other covariates. The variable names should be the same as those
in the fitted model formula.  There must be either one value per covariate
(the typical situation) or \(n\) values per covariate, a different one
for each of the \(n\) allowed transitions.</p></dd>


<dt>variance</dt>
<dd><p>Calculate the variances and covariances of the transition
cumulative hazards (<code>TRUE</code> or <code>FALSE</code>).  This is based on
simulation from the normal asymptotic distribution of the estimates, which
is computationally-expensive.</p></dd>


<dt>tvar</dt>
<dd><p>Name of the categorical variable in the model formula that
represents the transition number.  This should have been defined as a factor,
with factor levels that 
correspond to elements of <code>trans</code>, conventionally a sequence of
integers starting from 1.  Not required if <code>x</code> is a list of
transition-specific models.</p></dd>


<dt>trans</dt>
<dd><p>Matrix indicating allowed transitions in the multi-state
model, in the format understood by <span class="pkg">mstate</span>: a matrix of integers whose
\(r,s\) entry is \(i\) if the \(i\)th transition type (reading across
rows) is \(r,s\), and has <code>NA</code>s on the diagonal and where the
\(r,s\) transition is disallowed.</p></dd>


<dt>B</dt>
<dd><p>Number of simulations from the normal asymptotic distribution used
to calculate variances.  Decrease for greater speed at the expense of
accuracy.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>"msfit"</code>, in the same form as the objects
used in the <span class="pkg">mstate</span> package.  The <code><a href="https://rdrr.io/pkg/mstate/man/msfit.html" class="external-link">msfit</a></code> method
from <span class="pkg">mstate</span> returns the equivalent cumulative intensities for Cox
regression models fitted with <code><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Liesbeth C. de Wreede, Marta Fiocco, Hein Putter (2011).
<span class="pkg">mstate</span>: An R Package for the Analysis of Competing Risks and
Multi-State Models. <em>Journal of Statistical Software</em>, 38(7), 1-30.
<a href="https://doi.org/10.18637/jss.v038.i07" class="external-link">doi:10.18637/jss.v038.i07</a></p>
<p>Mandel, M. (2013). "Simulation based confidence intervals for functions
with complicated derivatives." The American Statistician 67(2):76-81</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><span class="pkg">flexsurv</span> provides alternative functions designed
specifically for predicting from parametric multi-state models without
calling <span class="pkg">mstate</span>.  These include <code><a href="pmatrix.fs.html">pmatrix.fs</a></code> and
<code><a href="pmatrix.simfs.html">pmatrix.simfs</a></code> for the transition probability matrix, and
<code><a href="totlos.fs.html">totlos.fs</a></code> and <code><a href="totlos.simfs.html">totlos.simfs</a></code> for expected total
lengths of stay in states.  These are generally more efficient than going
via <span class="pkg">mstate</span>.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>C. H. Jackson <a href="mailto:chris.jackson@mrc-bsu.cam.ac.uk">chris.jackson@mrc-bsu.cam.ac.uk</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## 3 state illness-death model for bronchiolitis obliterans</span></span></span>
<span class="r-in"><span><span class="co">## Compare clock-reset / semi-Markov multi-state models</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Simple exponential model (reduces to Markov)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="flexsurvreg.html">flexsurvreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">years</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">trans</span>,</span></span>
<span class="r-in"><span>                    data<span class="op">=</span><span class="va">bosms3</span>, dist<span class="op">=</span><span class="st">"exp"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="cn">NA</span>,<span class="fl">3</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mexp</span> <span class="op">&lt;-</span> <span class="fu">msfit.flexsurvreg</span><span class="op">(</span><span class="va">bexp</span>, t<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">12</span>,by<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          trans<span class="op">=</span><span class="va">tmat</span>, tvar<span class="op">=</span><span class="st">"trans"</span>, variance<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Cox semi-parametric model within each transition</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bcox</span> <span class="op">&lt;-</span> <span class="fu">coxph</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">years</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/strata.html" class="external-link">strata</a></span><span class="op">(</span><span class="va">trans</span><span class="op">)</span>, data<span class="op">=</span><span class="va">bosms3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://www.lumc.nl/org/bds/research/medische-statistiek/survival-analysis/" class="external-link">"mstate"</a></span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mcox</span> <span class="op">&lt;-</span> <span class="fu">mstate</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mstate/man/msfit.html" class="external-link">msfit</a></span><span class="op">(</span><span class="va">bcox</span>, trans<span class="op">=</span><span class="va">tmat</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Flexible parametric spline-based model </span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bspl</span> <span class="op">&lt;-</span> <span class="fu"><a href="flexsurvspline.html">flexsurvspline</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">years</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">trans</span> <span class="op">+</span> <span class="fu">gamma1</span><span class="op">(</span><span class="va">trans</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       data<span class="op">=</span><span class="va">bosms3</span>, k<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mspl</span> <span class="op">&lt;-</span> <span class="fu">msfit.flexsurvreg</span><span class="op">(</span><span class="va">bspl</span>, t<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">12</span>,by<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         trans<span class="op">=</span><span class="va">tmat</span>, tvar<span class="op">=</span><span class="st">"trans"</span>, variance<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Compare fit: exponential model is OK but the spline is better</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mcox</span>, lwd<span class="op">=</span><span class="fl">1</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">12</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>,<span class="st">"red"</span>,<span class="st">"green"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">mexp</span><span class="op">$</span><span class="va">Haz</span><span class="op">$</span><span class="va">time</span><span class="op">[</span><span class="va">mexp</span><span class="op">$</span><span class="va">Haz</span><span class="op">$</span><span class="va">trans</span><span class="op">==</span><span class="va">i</span><span class="op">]</span>, <span class="va">mexp</span><span class="op">$</span><span class="va">Haz</span><span class="op">$</span><span class="va">Haz</span><span class="op">[</span><span class="va">mexp</span><span class="op">$</span><span class="va">Haz</span><span class="op">$</span><span class="va">trans</span><span class="op">==</span><span class="va">i</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>             col<span class="op">=</span><span class="va">cols</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, lwd<span class="op">=</span><span class="fl">2</span>, lty<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">mspl</span><span class="op">$</span><span class="va">Haz</span><span class="op">$</span><span class="va">time</span><span class="op">[</span><span class="va">mspl</span><span class="op">$</span><span class="va">Haz</span><span class="op">$</span><span class="va">trans</span><span class="op">==</span><span class="va">i</span><span class="op">]</span>, <span class="va">mspl</span><span class="op">$</span><span class="va">Haz</span><span class="op">$</span><span class="va">Haz</span><span class="op">[</span><span class="va">mspl</span><span class="op">$</span><span class="va">Haz</span><span class="op">$</span><span class="va">trans</span><span class="op">==</span><span class="va">i</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>             col<span class="op">=</span><span class="va">cols</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, lwd<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"topright"</span>, lwd<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>, lty<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Cox"</span>, <span class="st">"Exponential"</span>, <span class="st">"Flexible parametric"</span><span class="op">)</span>, bty<span class="op">=</span><span class="st">"n"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: mstate</span>
<span class="r-plt img"><img src="msfit.flexsurvreg-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Fit a list of models, one for each transition</span></span></span>
<span class="r-in"><span><span class="co">## More computationally efficient, but only valid if parameters</span></span></span>
<span class="r-in"><span><span class="co">## are different between transitions.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">bexp.list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">vector</a></span><span class="op">(</span><span class="fl">3</span>, mode<span class="op">=</span><span class="st">"list"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span> <span class="op">{</span> </span></span>
<span class="r-in"><span>  <span class="va">bexp.list</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="flexsurvreg.html">flexsurvreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">years</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>, subset<span class="op">=</span><span class="op">(</span><span class="va">trans</span><span class="op">==</span><span class="va">i</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                data<span class="op">=</span><span class="va">bosms3</span>, dist<span class="op">=</span><span class="st">"exp"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The list of models can be passed to this and other functions,</span></span></span>
<span class="r-in"><span><span class="co">## as if it were a single multi-state model. </span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">msfit.flexsurvreg</span><span class="op">(</span><span class="va">bexp.list</span>, t<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">12</span>,by<span class="op">=</span><span class="fl">0.1</span><span class="op">)</span>, trans<span class="op">=</span><span class="va">tmat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Christopher Jackson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

